2,"SELECT p.ra, p.dec, z.z, z.zErr, p.petroMag_r FROM PhotoObj p JOIN dbo.fGetNearbyObjEq (#, #, #) n ON n.objID = p.objID JOIN Photoz z ON z.objID = n.objID WHERE p.type = # AND z.z < # + #*z.zErr AND z.z > # - #*z.zErr AND z.zErr < # */ DECLARE @cnt INT = #; WHILE @cnt < = # BEGIN DECLARE @ra1 FLOAT = (SELECT ra FROM mydb.sample_targets4 WHERE idx_num = @cnt) DECLARE @dec1 FLOAT = (SELECT dec FROM mydb.sample_targets4 WHERE idx_num = @cnt) DECLARE @theta1 FLOAT = (SELECT theta FROM mydb.sample_targets4 WHERE idx_num = @cnt) DECLARE @z1 FLOAT = (SELECT z FROM mydb.sample_targets4 WHERE idx_num = @cnt) SELECT p.ra, p.dec, z.z, z.zErr, p.petroMag_r FROM PhotoObj p JOIN dbo.fGetNearbyObjEq (@ra1, @dec1, @theta1) n ON n.objID = p.objID JOIN Photoz z ON z.objID = n.objID WHERE p.type = # AND z.z < @z1 + #*z.zErr AND z.z > @z1 - #*z.zErr AND z.zErr < # SET @cnt = @cnt + #; END;"
2019-05-10 12:41:00,2
